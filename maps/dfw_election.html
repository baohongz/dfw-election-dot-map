<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>The 2016 DFW Election Dot Map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.css' rel='stylesheet' />
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css" rel="stylesheet" integrity="sha384-RpX8okQqCyUNG7PlOYNybyJXYTtGQH+7rIKiVvg1DLg6jahLEk47VvpUyS+E2/uJ" crossorigin="anonymous">
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<style>

.legend {
  /*background-color: #fff; */
  border-radius: 3px;
  bottom: 30px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.10);
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  padding: 10px;
  /*opacity: 0.6;*/
  position: absolute;
  right: 10px;
  z-index: 1;
  color: #fff;
}

.legend h4 {
  margin: 0 0 10px;
  color: #fff;
}

.legend div span {
  border-radius: 50%;
  display: inline-block;
  height: 10px;
  margin-right: 5px;
  width: 10px;
}

</style>

<!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">The 2016 DFW Election Dot Map</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li><a href="http://urbanstudies.tcu.edu/research/blog/">More about the map</a></li>
        <li><a href="http://urbanstudies.tcu.edu">TCU Center for Urban Studies</a></li>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>


<div id='map'></div>


<div id='legend10' class='legend'>
  <h4>1 dot = 10 votes</h4>
  <div><span style='background-color: #FA0505'></span>Trump</div>
  <div><span style='background-color: #0746F2'></span>Clinton</div>
  <div><span style='background-color: #F0FC03'></span>Johnson</div>
  <div><span style='background-color: #06B709'></span>Stein</div>
</div>

<div id='legend25' class='legend' style='display: none;'>
  <h4>1 dot = 25 votes</h4>
  <div><span style='background-color: #FA0505'></span>Trump</div>
  <div><span style='background-color: #0746F2'></span>Clinton</div>
  <div><span style='background-color: #F0FC03'></span>Johnson</div>
  <div><span style='background-color: #06B709'></span>Stein</div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoia3dhbGtlcnRjdSIsImEiOiJMRk9JSmRvIn0.l1y2jHZ6IARHM_rA1-X45A';
var map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/kwalkertcu/civbciphj00442jmhvc1lej21', //hosted style id
    center: [-97.01, 32.86], // starting position
    zoom: 10.1,
    minZoom: 8,
    hash: true
});

map.addControl(new mapboxgl.NavigationControl({position: 'bottom-left'}));

var legend10el = document.getElementById('legend10');
var legend25el = document.getElementById('legend25');
map.on('zoom', function() {
    if (map.getZoom() > 9.999999) {
        legend25el.style.display = 'none';
        legend10el.style.display = 'block';
    } else {
        legend25el.style.display = 'block';
        legend10el.style.display = 'none';
    }
});

</script>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>


</body>
</html>
